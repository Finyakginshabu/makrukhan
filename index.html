<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knight Drag Chess</title>
    <style>
        body { display: flex; justify-content: center; align-items: center; height: 100vh; }
        .board { display: grid; grid-template-columns: repeat(8, 60px); grid-template-rows: repeat(8, 60px); }
        .square { width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; }
        .light { background-color: #f0d9b5; }
        .dark { background-color: #b58863; }
        .knight { width: 50px; height: 50px; cursor: grab; }
    </style>
</head>
<body>
    <div class="board" id="board"></div>
    <script>
        const board = document.getElementById("board");
        const knightMoves = [[2,1], [2,-1], [-2,1], [-2,-1], [1,2], [1,-2], [-1,2], [-1,-2]];
        let knight;

        function createBoard() {
            for (let row = 0; row < 8; row++) {
                for (let col = 0; col < 8; col++) {
                    let square = document.createElement("div");
                    square.className = `square ${ (row + col) % 2 === 0 ? "light" : "dark"}`;
                    square.dataset.row = row;
                    square.dataset.col = col;
                    board.appendChild(square);
                }
            }
        }

        function placeKnight(row, col) {
            knight = document.createElement("img");
            knight.src = "assets/knight.svg";
            knight.className = "knight";
            knight.draggable = true;
            document.querySelector(`[data-row='${row}'][data-col='${col}']`).appendChild(knight);
            addDragEvents();
        }

        function isValidMove(startRow, startCol, endRow, endCol) {
            return knightMoves.some(([r, c]) => startRow + r === endRow && startCol + c === endCol);
        }

        function addDragEvents() {
            knight.addEventListener("dragstart", (e) => e.dataTransfer.setData("text", ""));
            document.querySelectorAll(".square").forEach(square => {
                square.addEventListener("dragover", (e) => e.preventDefault());
                square.addEventListener("drop", function () {
                    let startRow = +knight.parentElement.dataset.row;
                    let startCol = +knight.parentElement.dataset.col;
                    let endRow = +this.dataset.row;
                    let endCol = +this.dataset.col;
                    if (isValidMove(startRow, startCol, endRow, endCol)) this.appendChild(knight);
                });
            });
        }

        createBoard();
        placeKnight(7, 1); // b1 position
    </script>
</body>
</html>
